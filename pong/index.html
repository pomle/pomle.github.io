<html><head><title>Pong</title><style type="text/css">body{background:#000;margin:0}</style></head><body><canvas width="600" height="300"><script type="text/javascript">function Vec2(e,l){this.x=e,this.y=l}function Player(){this.score=0,this.pos=new Vec2(0,0),this.size=new Vec2(20,100)}function Ball(){this.speed=.5,this.pos=new Vec2(0,0),this.size=new Vec2(10,10),this.vel=new Vec2(0,0)}function can2vec(e){return new Vec2(e.x*scale.x,e.y*scale.y)}function vec2can(e){return new Vec2(e.x*scale.x,e.y*scale.y)}function draw(){updateScale(),context.fillStyle="#000",context.fillRect(0,0,canvas.width,canvas.height),players.forEach(drawSquare),drawSquare(ball)}function drawSquare(e){context.fillStyle="#fff";var l=vec2can(e.pos),a=vec2can(e.size);context.fillRect(l.x,l.y,a.x,a.y)}function loop(e){update(16),draw(),time=e,requestAnimationFrame(loop)}function resetBall(){ball.pos.x=court.x/2-ball.size.x/2,ball.pos.y=court.y/2-ball.size.y/2,ball.vel.x=0,ball.vel.y=0}function returnBall(){ball.vel.x*=-1,ball.vel.y+=-.2+.4*Math.random(),ball.vel.length(ball.speed)}function startBall(){0===ball.vel.x&&0===ball.vel.y&&(ball.vel.x=-1+2*Math.random(),ball.vel.y=-.1+.2*Math.random(),ball.vel.length(ball.speed))}function update(e){var l=players[1];l.pos.y=ball.pos.y-l.size.y/2,updateBall(e)}function updateBall(e){if(ball.pos.x+ball.size.x<0)return++players[1].score,void resetBall();if(ball.pos.x>court.x)return++players[0].score,void resetBall();if((ball.pos.y<0||ball.pos.y+ball.size.y>court.y)&&(ball.vel.y*=-1),ball.vel.x>0){var l=players[1];isBallCaughtY(l,ball)&&ball.pos.x+ball.size.x>l.pos.x&&ball.pos.x<l.pos.x&&returnBall()}else if(ball.vel.x<0){var l=players[0];isBallCaughtY(l,ball)&&ball.pos.x<l.pos.x+l.size.x&&ball.pos.x>l.pos.x&&returnBall()}ball.pos.x+=ball.vel.x*e,ball.pos.y+=ball.vel.y*e}function isBallCaughtY(e,l){return l.pos.y+l.size.x>e.pos.y&&l.pos.y<e.pos.y+e.size.y}function updateScale(){scale.x=canvas.width/court.x,scale.y=canvas.height/court.y}function updateCanvas(){canvas.width=document.body.clientWidth,canvas.height=document.body.clientHeight}Vec2.prototype.length=function(e){var l=Math.sqrt(this.x*this.x+this.y*this.y);if(e){var a=e/l;return this.x*=a,void(this.y*=a)}return l};var canvas=document.getElementsByTagName("canvas")[0],context=canvas.getContext("2d"),deltaTime=0,time=0,court=new Vec2(600,340),scale=new Vec2(1,1),margin=new Vec2(20,0),players=[new Player,new Player],ball=new Ball,returnMultiplier=1;players[0].pos.x=margin.x,players[1].pos.x=court.x-(players[1].size.x+margin.x),resetBall(),document.addEventListener("mousemove",function(e){players[0].pos.y=e.clientY/scale.y-players[0].size.y/2}),window.addEventListener("resize",updateCanvas),window.addEventListener("click",startBall),updateCanvas(),loop(0)</script></body></html>